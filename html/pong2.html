<canvas id="gc" width="640" height="480"></canvas>
<script>
p1y=p2y=40;
pt=10;
ph=80;
bx=by=250;
bd=6;
vx=6;
vy=4;
score1=score2=0;
vai=50;
window.onload=function() {
	c=document.getElementById('gc');
	cc=c.getContext('2d');
	setInterval(update, 1000/30);
	c.addEventListener('mousemove',function(e) {
		p1y = e.clientY-ph/2;
	});
}

function reset() {
	bx=c.width/2;
	by=c.height/2;
	vx= -vx;
	vy=(Math.random() * 2) + 3;
}

function update() {
	bx += vx;
	by += vy;
	if(by<0 && vy<0) {
		vy=-vy;
	}
	if(by>c.height && vy>0) {
		vy=-vy;
	}
	if(bx<0) {
		if(by>p1y && by<p1y+ph) {
			vx=- 1.1 * vx;
			dy=by-(p1y+ph/2);
			vy=dy*0.3;
		} else {
			score2++;
			reset();
		}
	}
	if(bx>c.width) {
		if(by>p2y && by<p2y+ph) {
			vx=- vx;
			dy=by-(p2y+ph/2);
			vy=dy*0.3;
		} else {
			score1++;
			reset();
		}
	}
	if(by<0 && vy<0) {
		vy=-vy;
	}

	if(p2y+ph/2<by) {
		p2y+=vai;
	} else {
		p2y -= vai;
	}

	cc.fillStyle='black';
	cc.fillRect(0,0,c.width,c.height);
	cc.fillStyle='white';
	cc.fillRect(0,p1y,pt,ph);
	cc.fillRect(c.width-pt,p2y,pt,ph);
	cc.fillRect(bx-bd/2,by-bd/2,bd,bd);
	cc.font="50px monospace"
		cc.fillText(score1,100,100);
	cc.fillText(score2,c.width-100,100);
}
</script>

