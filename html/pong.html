<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<canvas id="gc" width="1600" height="900"></canvas>
<script>
p1y=p2y=40;
pt=10;
ph=100;
bx=by=250;
bd=6;
vx=45;
vy=10;
score1=score2=0;
vai=20;
window.onload=function() {
	c=document.getElementById('gc');
	cc=c.getContext('2d');
	setInterval(update, 1000/30);
	c.addEventListener('mousemove',function(e) {
		p1y = e.clientY-ph/2;
	});
}

function reset() {
	bx=c.width/2;
	by=c.height/2;
	vx=-vx;
	vy=3;
}
function scream() {
	var imageObj = new Image();
	var scream_sound = new Audio("assets/sound/scream.mp3");
	imageObj.onload = function() {
		cc.drawImage(imageObj, 0, 0);
		scream_sound.play();
	}
	imageObj.src = 'https://i.ytimg.com/vi/xb2f_FV0VE8/maxresdefault.jpg';
}
function update() {
	bx += vx;
	by += vy;
	if(by<0 && vy<0) {
		vy=-vy;
	}
	if(by>c.height && vy>0) {
		vy=-vy;
	}
	if(bx<0) {
		if(by>p1y && by<p1y+ph) {
			vx=-vx;
			dy=by-(p1y+ph/2);
			vy=dy*0.3;
		} else {
			scream();
			score2++;
			setTimeout(reset,1000);
		}
	}
	if(bx>c.width) {
		if(by>p2y && by<p2y+ph) {
			vx=-vx;
			dy=by-(p2y+ph/2);
			vy=dy*0.3;
		} else {
			score1++;
			reset();
		}
	}
	if(by<0 && yv<0) {
		vy=-vy;
	}

	if(p2y+ph/2<by) {
		p2y+=vai;
	} else {
		p2y -= vai;
	}

	cc.fillStyle='black';
	cc.fillRect(0,0,c.width,c.height);
	cc.fillStyle='white';
	cc.fillRect(0,p1y,pt,ph);
	cc.fillRect(c.width-pt,p2y,pt,ph);
	cc.fillRect(bx-bd/2,by-bd/2,bd,bd);
	cc.fillText(score1,100,100);
	cc.fillText(score2,c.width-100,100);
}
</script>
